"""
Specific repositories for each model.
"""
from typing import List, Optional, Dict, Any
from sqlalchemy.orm import Session, joinedload
from sqlalchemy import func, and_
from datetime import datetime, timedelta

from .base import BaseRepository
from ..models import (
    {% for class in classes %}
    {{ class.name }}{% if not loop.last %},{% endif %}
    {% endfor %}
)
from ..schemas import (
    {% for class in classes %}
    {% if not has_polymorphic_parent(class) %}
    {{ class.name }}Create, {{ class.name }}Update{% if not loop.last %},{% endif %}
    {% endif %}
    {% endfor %}
)


{% for class in classes %}
{% if not has_polymorphic_parent(class) %}
class {{ class.name }}Repository(BaseRepository[{{ class.name }}, {{ class.name }}Create, {{ class.name }}Update]):
    """Repository for {{ class.name }} model."""
    
    def __init__(self):
        super().__init__({{ class.name }})


{% endif %}
{% endfor %}

# Repository instances (singletons)
{% for class in classes %}
{% if not has_polymorphic_parent(class) %}
{{ class.name.lower() }}_repo = {{ class.name }}Repository()
{% endif %}
{% endfor %}
