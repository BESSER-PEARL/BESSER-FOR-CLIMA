@startuml
class City{
    name: str
}

abstract class KPI {
   id_kpi: str
   name: str
   category: str
   description: str
   provider: str
   calculationFrequency: str
   unitText: str
}

class KPIValue {
   kpiValue: int
   timestamp: datetime
   currentStanding: str
}

class KPITemp {
   threshold: int
}

class KPITraffic {
   target: int
}

class KPICollectedWaste extends KPI {
   target: int
}

class KPISecondHandCustomers extends KPI {
   target: int
}

class KPIMoney {
   target: int
}

class KPITotalRenewableEnergy extends KPI {
   target: int
}

class KPINumberHouseholdRenewableEnergy extends KPI {
   target: int
}

class KPIPeakSolarEnergy extends KPI {
   target: int
}

abstract class Visualisation {
   xposition: int
   yposition: int
   width: int
   height: int
   chartType: str
   title: str
   i: str
   section: str
}

class Table {
}

class PieChart {
}

class StatChart {
   unit: str
   target: int
}

class LineChart {
   xtitle: str
   ytitle: str
   color: str
   target: int
}

class TableColumn {
name: str
}

class Map {
}

abstract class User {
    password: str
    email: str
    firstName: str
    lastName: str
}

class Admin {
}

class CityUser {
}

class CityAngel {
}

class SolutionProvider {
}

class Citizen {
}

KPI --> "*" KPIValue: values
City --> "*" KPI: kpis
KPI <|-- KPITemp
KPI <|-- KPITraffic
KPI <|-- KPIMoney

Visualisation "*" <--  KPI: visualizedBy

Visualisation <|-- Table
Visualisation <|-- PieChart
Visualisation <|-- StatChart
Visualisation <|-- LineChart
Visualisation <|-- Map

class Dashboard {
code: str
}



City --> "*" Dashboard: has
Dashboard --> "*" Visualisation: consistsOf
Table --> "*" TableColumn: shows

City --> "*" User: operatedBy
User <|-- Admin
User <|-- CityUser
User <|-- CityAngel
User <|-- SolutionProvider
User <|-- Citizen

abstract class MapData {
title: str
}

class GeoJson {
   data: str
}

class WMS {
   url: str
   name: str
}

City --> "*" MapData: hasMapData

GeoJson --|> MapData
WMS --|> MapData

Map "*"<-- MapData: isDisplayedOnMap

class KPIParticipants extends KPI {
target: int
}

class KPIWasteAvoided extends KPI {
target: int
}

class KPICo2Avoided extends KPI {
target: int
}

class KPIWasteSorted extends KPI {
target: int
}

class KPITextileWastePerPerson extends KPI {
}


@enduml