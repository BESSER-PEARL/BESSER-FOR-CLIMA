@startuml
skinparam groupInheritance 2

abstract KPI {
   id: str
   name: str
   category: str
   description: str
   provider: str
   currentStanding: str
   calculationFrequency: str
   kpiValue: int
   unitText: str
   timestamp: datetime
}

class KPITemp {
   threshold: int
}

class KPITraffic {
   target: int
}

abstract class City{
   name: str
}

class Differdange{
   name = Differdange
}

class Sofia{
   name = Sofia
}

KPI <|-- KPITemp
KPI <|-- KPITraffic

City <|-- Differdange
City <|-- Sofia



' Define the Dashboard
class Dashboard {
   +String name
   +addPanel(Panel p)
   +getPanels() : List<Panel>
}

' Define the Panel class
class Panel {
   +String title
   +setVisualization(Visualization v)
   +setQuery(Query q)
   +getVisualization() : Visualization
   +getQuery() : Query
}

' Define the Visualization class
abstract class Visualization {
   +String type
}

' Specific visualizations extend the Visualization class
class Graph extends Visualization {
   +Boolean isStacked
   +String yAxis
}

class Gauge extends Visualization {
   +Int min
   +Int max
}

class Table extends Visualization {
   +List<String> columns
}

class BarChart extends Visualization {
   +Boolean showLegend
}

class PieChart extends Visualization {
   +Boolean showLabels
}

class Heatmap extends Visualization {
   +String colorScheme
}

class Stat extends Visualization {
   +String textMode
}

class Text extends Visualization {
   +String content
}

class TimeSeries extends Visualization {
   +String lineInterpolation
}

class Histogram extends Visualization {
   +Int bucketSize
}

' Define the Query class
class Query {
   +String queryString
   +setDataSource(DataSource ds)
   +getDataSource() : DataSource
}

' Define the DataSource class
class DataSource {
   +String name
   +String type
}

' Relationships
Dashboard "1" *-- "0..*" Panel : contains >
Panel "1" *-- "1" Visualization : displays >
Panel "1" *-- "1" Query : uses >
Query "1" *-- "1" DataSource : fetches data from >

Differdange -- KPITemp
Sofia -- KPITraffic
KPITemp -- Gauge
KPITraffic -- Graph
City "1" -- "1" Dashboard

@enduml
